# ============================================================================
# PaperTrade - Development Override Configuration
# ============================================================================
# Copy this file to docker-compose.override.yml to enable development features.
# The override file is automatically loaded when you run `docker compose up`.
#
# This file is gitignored to allow local customizations.
# 
# Setup:
#   cp docker-compose.override.yml.example docker-compose.override.yml
#
# Features enabled:
#   - Source code volume mounts for hot-reload
#   - Development container names
#   - Trust-based PostgreSQL authentication (no password required)
#   - Development-specific environment variables

services:
  db:
    container_name: papertrade-postgres-dev
    environment:
      # WARNING: `trust` disables password verification and is intended for
      # local development only. Do NOT use this setting in production.
      POSTGRES_HOST_AUTH_METHOD: trust

  redis:
    container_name: papertrade-redis-dev

  backend:
    container_name: papertrade-backend-dev
    environment:
      PYTHONPATH: /app/src
    volumes:
      # Mount source code for hot-reload
      - ./backend/src:/app/src
      - ./backend/tests:/app/tests
      - ./backend/migrations:/app/migrations
      - ./backend/alembic.ini:/app/alembic.ini

  frontend:
    container_name: papertrade-frontend-dev
    volumes:
      # Mount source code for hot-reload
      - ./frontend/src:/app/src
      - ./frontend/public:/app/public
      - ./frontend/index.html:/app/index.html
      - ./frontend/package.json:/app/package.json
      - ./frontend/vite.config.ts:/app/vite.config.ts
      - ./frontend/tsconfig.json:/app/tsconfig.json
      - ./frontend/tsconfig.app.json:/app/tsconfig.app.json
      - ./frontend/tsconfig.node.json:/app/tsconfig.node.json
      - ./frontend/tailwind.config.ts:/app/tailwind.config.ts
      - ./frontend/postcss.config.js:/app/postcss.config.js
      # Preserve node_modules from the image
      - frontend_node_modules:/app/node_modules

volumes:
  frontend_node_modules:
    driver: local
